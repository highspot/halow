
<% if (typeof awsError !== 'undefined' && awsError) { %>
<div class="alert alert-warning">
    <i class="fas fa-exclamation-triangle"></i>
    <strong>AWS Connection Issue:</strong> <%= awsError %>
    <br><small>The dashboard will work in demo mode. Configure AWS credentials to connect to DynamoDB.</small>
</div>
<% } %>

<div class="dashboard-header">
    <h2><i class="fas fa-chart-line"></i> Data Dashboard</h2>
    <button class="btn btn-primary" onclick="toggleAddForm()">
        <i class="fas fa-plus"></i> Add New Data
    </button>
</div>

<!-- Add Data Form -->
<div id="addDataForm" class="card form-card" style="display: none;">
    <h3><i class="fas fa-plus-circle"></i> Add New Data</h3>
    <form action="/data" method="POST">
        <div class="form-group">
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" required class="form-control">
        </div>
        
        <div class="form-group">
            <label for="description">Description:</label>
            <textarea id="description" name="description" required class="form-control" rows="3"></textarea>
        </div>
        
        <div class="form-group">
            <label for="metadata">Metadata (JSON - optional):</label>
            <textarea id="metadata" name="metadata" placeholder='{"key": "value"}' class="form-control" rows="2"></textarea>
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i> Save Data
            </button>
            <button type="button" class="btn btn-secondary" onclick="toggleAddForm()">
                <i class="fas fa-times"></i> Cancel
            </button>
        </div>
    </form>
</div>

<!-- Data Display -->
<div class="data-section">
    <h3><i class="fas fa-list"></i> Stored Data (<%= items.length %> items)</h3>
    
    <% if (items.length === 0) { %>
        <div class="empty-state">
            <i class="fas fa-inbox"></i>
            <h4>No data found</h4>
            <p>Start by adding some data to see it displayed here.</p>
        </div>
    <% } else { %>
        <div class="items-grid">
            <% items.forEach(function(item) { %>
                <div class="card item-card" data-id="<%= item.id %>">
                    <div class="item-header">
                        <h4><%= item.title %></h4>
                        <button class="btn btn-danger btn-sm" onclick="deleteItem('<%= item.id %>')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    
                    <div class="item-content">
                        <p><%= item.description %></p>
                        
                        <% if (item.metadata) { %>
                            <div class="metadata">
                                <strong>Metadata:</strong>
                                <pre><%= JSON.stringify(item.metadata, null, 2) %></pre>
                            </div>
                        <% } %>
                    </div>
                    
                    <div class="item-footer">
                        <small class="timestamp">
                            <i class="fas fa-clock"></i>
                            <%= new Date(item.timestamp).toLocaleString() %>
                        </small>
                        <small class="item-id">
                            ID: <%= item.id %>
                        </small>
                    </div>
                </div>
            <% }); %>
        </div>
    <% } %>
</div>

<!-- Health Check Section -->
<div class="health-section">
    <h3><i class="fas fa-heartbeat"></i> Service Health</h3>
    <div class="health-checks">
        <a href="/probe/startup" class="health-link" target="_blank">
            <i class="fas fa-rocket"></i> Startup Probe
        </a>
        <a href="/probe/liveness" class="health-link" target="_blank">
            <i class="fas fa-heart"></i> Liveness Probe
        </a>
        <a href="/probe/readiness" class="health-link" target="_blank">
            <i class="fas fa-check-circle"></i> Readiness Probe
        </a>
    </div>
</div>